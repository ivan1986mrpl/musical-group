var L=Object.defineProperty;var p=(t,s,o)=>s in t?L(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o;var c=(t,s,o)=>p(t,typeof s!="symbol"?s+"":s,o);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();class b{constructor(){c(this,"selectors",{root:"[data-js-header]",menu:"[data-js-header-menu]",burgerButton:"[data-js-header-burger-button]",overlay:".header__overlay"});c(this,"stateClasses",{isActive:"is-active",isLock:"lock"});c(this,"toggleMenu",()=>{this.menuElement.classList.contains(this.stateClasses.isActive)?this.closeMenu():this.openMenu()});c(this,"onEscapePress",s=>{s.key==="Escape"&&this.closeMenu()});c(this,"onOverlayClick",s=>{s.target===this.overlayElement&&this.closeMenu()});c(this,"onMenuClick",s=>{const o=s.target;(o.closest("a.menu__link")||o.closest("button"))&&this.closeMenu()});this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.menuElement=this.rootElement.querySelector(this.selectors.menu),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.bindEvents())}openMenu(){this.burgerButtonElement.classList.add(this.stateClasses.isActive),this.menuElement.classList.add(this.stateClasses.isActive),document.body.classList.add(this.stateClasses.isLock)}closeMenu(){this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.menuElement.classList.remove(this.stateClasses.isActive),document.body.classList.remove(this.stateClasses.isLock)}bindEvents(){!this.burgerButtonElement||!this.menuElement||(this.burgerButtonElement.addEventListener("click",this.toggleMenu),this.menuElement.addEventListener("click",this.onMenuClick),this.overlayElement&&this.overlayElement.addEventListener("click",this.onOverlayClick),document.addEventListener("keydown",this.onEscapePress))}destroy(){!this.burgerButtonElement||!this.menuElement||(this.burgerButtonElement.removeEventListener("click",this.toggleMenu),this.menuElement.removeEventListener("click",this.onMenuClick),this.overlayElement&&this.overlayElement.removeEventListener("click",this.onOverlayClick),document.removeEventListener("keydown",this.onEscapePress))}}const C=(t,s)=>{const o=t.querySelector("#userName"),u=t.querySelector("#userEmail"),r=t.querySelector("#userTextarea"),n={userName:()=>/^[A-Za-zА-Яа-яЁё\s-]{3,15}$/.test(o.value.trim()),userEmail:()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.value.trim()),userTextarea:()=>r.value.trim().length>=10},l={userName:"Ім’я повинно містити 3–15 букв (латиниця або кирилиця), пробіли або дефіси.",userEmail:"Email має бути у форматі username@example.com",userTextarea:"Повідомлення повинно містити щонайменше 10 символів."};[o,u,r].forEach(e=>{const i=e.id==="userName"?"userName":e.id==="userEmail"?"userEmail":"userTextarea",a=e.id+"Error";e.addEventListener("input",()=>v(e,a,i))}),t.addEventListener("submit",async e=>{if(e.preventDefault(),h(),!E())return;let i=document.createElement("div");i.classList.add("status"),t.appendChild(i);const a={loading:"Завантаження...",success:"Форма успішно відправлена!",failure:"Сталася помилка. Спробуйте ще раз."};i.textContent=a.loading;const m=new FormData(t);try{const g=await(await fetch(s,{method:"POST",body:m})).text();console.log(g),i.textContent=a.success,t.reset(),h()}catch{i.textContent=a.failure}finally{setTimeout(()=>i.remove(),5e3)}});function E(){let e=!0;return n.userName()||(d(o,"nameError",l.userName),e=!1),n.userEmail()||(d(u,"emailError",l.userEmail),e=!1),n.userTextarea()||(d(r,"textareaError",l.userTextarea),e=!1),e}function v(e,i,a){n[a]()?f(e,i):d(e,i,l[a])}function d(e,i,a){e.classList.remove("valid"),e.classList.add("invalid");const m=t.querySelector("#"+i);m&&(m.textContent=a)}function f(e,i){e.classList.remove("invalid"),e.classList.add("valid");const a=t.querySelector("#"+i);a&&(a.textContent="")}function h(){t.querySelectorAll(".error").forEach(e=>e.textContent=""),t.querySelectorAll(".invalid, .valid").forEach(e=>e.classList.remove("invalid","valid"))}};window.addEventListener("DOMContentLoaded",()=>{new b;const t=document.getElementById("form");C(t,"assets/server.php")});
